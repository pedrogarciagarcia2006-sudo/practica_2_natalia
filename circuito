import time
import RPi.GPIO as GPIO

leda = 17
ledr = 27
zumba = 22
sen = 4
contador = 0
clave = "1234"

GPIO.setmode(GPIO.BCM)
GPIO:setup(leda, GPIO.OUT)
GPIO:setup(ledr, GPIO.OUT)
GPIO:setup(zumba, GPIO.OUT)
GPIO:setup(sen, GPIO.IN, pull_up_down=GPIO.PUD_DOWN)

while True:

  if GPIO.input(sen) == GPIO.HIGH:
    contador = contador + 1
    time.sleep(1)
  if contador == 1:
    GPIO.output(leda, True)
  elif contador == 2:
    GPIO.output(leda, False)
    GPIO.output(ledr, True)
  elif contador == 3:
    GPIO.output(ledr, False)
    GPIO.output(zumba, True)
    time.sleep(3)
    segclave = input("escribe la contraseña para apagar la alarma: ")
    if segclave == clave:
      print ("alarma desactivada")
      GPIO.output(zumba, False)
      newclave = input("escribe una nueva contraseña: ")
      clave = newclave
      while (len(newclave) < 6 or newclave.isalnum() == True):
        if (len(newclave) < 6):
          print ("la contraseña tiene que tener al menos 6 digitos")
        elif newclave.isalnum() == True:
          print ("la contraseña tiene que tener al menos un no sea alfanumerico")
        newclave = input("escribe una nueva contraseña: ")
        clave = newclave
    else:
      print ("llamando a ala policia")
      GPIO.output(zumba, False)

    contador = 0

GPIO.cleanup()
